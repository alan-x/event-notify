"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _EventHandleManager=require("./../../src/lib/EventHandleManager"),_EventHandleManager2=_interopRequireDefault(_EventHandleManager);it("event handle add|get|remove",function(){var e=new _EventHandleManager2.default;e.addEvent("1",function(){console.log("1:1")}),e.addEvent("1",function(){console.log("1:2")}),e.addEvent("2","1"),e.addEvent("2","2"),console.log(e.getEventHandleMap()),e.removeEvent("2","1"),console.log(e.getEventHandleMap()),e.removeEvent("2"),console.log(e.getEventHandleMap()),e.run("1")});var _EventManager=require("./../../src/lib/EventManager"),_EventManager2=_interopRequireDefault(_EventManager);it("event add|get|remove",function(){var e=new _EventManager2.default,n=e.addEvent("1");console.log(e.getEventMap()),e.removeEvent(n),console.log(e.getEventMap())});var _EventQueue=require("./../../src/lib/EventQueue"),_EventQueue2=_interopRequireDefault(_EventQueue);it("EventQueue pubish|subscribe|run",function(){var e=new _EventQueue2.default;e.subscribe("111",function(e){console.log("111:1 run",e)}),e.subscribe("111",function(e){console.log("111:2 run",e)}),e.run("111",{id:1}),e.run("111",{id:2})}),Object.defineProperty(exports,"__esModule",{value:!0});var _EventQueue2=_interopRequireDefault(_EventQueue=require("./lib/EventQueue"));exports.default=new _EventQueue2.default,Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),_EventManager2=_interopRequireDefault(_EventManager=require("./EventManager")),EventHandleManager=function(){function e(){_classCallCheck(this,e),this.eventManager=new _EventManager2.default,this.eventHandleMap=new Map}return _createClass(e,[{key:"getEventHandleMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return-1===e?this.eventHandleMap:this.eventHandleMap.get(e)}},{key:"addEvent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=this.getEventHandleMap(e);if(void 0===t&&(this.eventHandleMap.set(e,[]),t=this.getEventHandleMap(e)),-1!==n){var a=this.eventManager.addEvent(n);return t[t.length]=a,this.eventHandleMap.set(e,t),a}return null}},{key:"removeEvent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(-1===n)return this.eventHandleMap.delete(e),null;this.eventManager.removeEvent(n);for(var t=this.getEventHandleMap(e),a=0;a<t.length;a++)if(t[a]===n)return t.splice(a,1),null}},{key:"run",value:function(e,n){var t=this.getEventHandleMap(e);console.log("events",t);for(var a=0;a<t.length;a++)this.eventManager.run(t[a],n);return null}}]),e}();exports.default=EventHandleManager,Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),EventManager=function(){function e(){_classCallCheck(this,e),this.eventMap=new Map}return _createClass(e,[{key:"getEventMap",value:function(){return this.eventMap}},{key:"addEvent",value:function(n){var t=e.createUuid();return this.eventMap.set(t,n),t}},{key:"removeEvent",value:function(e){return this.eventMap.delete(e),console.log("eventMap"+this.eventMap),null}},{key:"run",value:function(e,n){var t=this.eventMap.get(e);return console.log(e,t),t(n),null}}],[{key:"createUuid",value:function(){for(var e=[],n=0;n<36;n++)e[n]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}}]),e}();exports.default=EventManager,Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),_EventHandleManager2=_interopRequireDefault(_EventHandleManager=require("./EventHandleManager")),EventQueue=function(){function e(){_classCallCheck(this,e),this.eventHandleManager=new _EventHandleManager2.default}return _createClass(e,[{key:"publish",value:function(e){return this.eventHandleManager.addEvent(e),null}},{key:"subscribe",value:function(e,n){return this.eventHandleManager.addEvent(e,n)}},{key:"run",value:function(e,n){return this.eventHandleManager.run(e,n),null}},{key:"cancel",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.eventHandleManager.removeEvent(e,n),null}}]),e}();exports.default=EventQueue;